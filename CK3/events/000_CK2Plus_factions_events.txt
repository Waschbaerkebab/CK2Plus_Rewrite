#####
#PlusFaction:
#
#Total = ?
#####

namespace = PlusFaction

#Scheduling Faction Meeting
#####

#Faction meeting invitations sent to the members
character_event = {
	id = PlusFaction.1
	title = PlusFaction.1_title
	desc = PlusFaction.1_desc
	picture = GFX_evt_bloodlines

	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		OR = {
			num_of_faction_backers = {
				faction = faction_court
				value = 1
			}
			num_of_faction_backers = {
				faction = faction_order
				value = 1
			}
			num_of_faction_backers = {
				faction = faction_prosperity
				value = 1
			}
			num_of_faction_backers = {
				faction = faction_glory
				value = 1
			}
			num_of_faction_backers = {
				faction = faction_tradition
				value = 1
			}
		}
		OR = {
			leads_faction = faction_court
			leads_faction = faction_order
			leads_faction = faction_prosperity
			leads_faction = faction_glory
			leads_faction = faction_tradition
		}
		NOT = {
			has_character_flag = do_not_disturb
		}
	}

	mean_time_to_happen = {
		years = 1
	}

	immediate = {
		plus_clean_faction_events = yes #Cleans all flags and variables set in the faction events file
		set_character_flag = do_not_disturb	
	}

	option = {
		name = PlusFaction.1_1
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					letter_event = {
						id = PlusFaction.2 #Faction meeting invitations received by members
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					letter_event = {
						id = PlusFaction.2 #Faction meeting invitations received by members
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					letter_event = {
						id = PlusFaction.2 #Faction meeting invitations received by members
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					letter_event = {
						id = PlusFaction.2 #Faction meeting invitations received by members
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					letter_event = {
						id = PlusFaction.2 #Faction meeting invitations received by members
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.4 #Faction leader presents agenda
			days = 7
		}
		ai_chance = {
			factor = 1
		}
	}

	option = {
		name = PlusFaction.1_2
		scaled_prestige = -0.25
		random = {
			chance = 25
			character_event = {
				id = PlusFaction.12 #Faction leader deemed not fit to lead faction
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Faction meeting invitations received by members
letter_event = {
	id = PlusFaction.2
	title = PlusFaction.2_title
	desc = PlusFaction.2_desc

	only_playable = yes
	min_age = 16
	capable_only = yes
	prisoner = no

	is_triggered_only = yes
	
	option = {
		name = PlusFaction.2_1
		trigger = {
			NOT = {
				has_character_flag = do_not_disturb
			}
		}
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "guests"
					value = 1
				}
			}
		}
		set_character_flag = do_not_disturb
		set_character_flag = accepted_meeting
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.2_2
		hidden_tooltip = {
			FROM = {
				letter_event = {
					id = PlusFaction.3 #Faction members refuse the invitation
					days = 2
				}
			}
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction members refuse the invitation
letter_event = {
	id = PlusFaction.3
	title = PlusFaction.3_title
	desc = PlusFaction.3_desc

	is_triggered_only = yes
	
	option = {
		name = PlusFaction.3_1
		scaled_prestige = -0.1
		opinion = { 
			modifier = opinion_disappointed
			who = FROM
			years = 10
		}
	}
}

#Faction leader presents agenda
character_event = {
	id = PlusFaction.4
	title = PlusFaction.4_title
	desc = PlusFaction.4_desc
	picture = GFX_evt_council
	sound = turning_page

	is_triggered_only = yes

	trigger = {
		check_variable = {
			which = "guests"
			value = 1
		}
	}

	fail_trigger_effect = { 
		character_event = {
			id = PlusFaction.9 #No guests arrive
		}
	}
	
	option = {
		name = PlusFaction.4_1
		character_event = {
			id = PlusFaction.5 #Faction leader focuses on self
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
		}
	}

	option = {
		name = PlusFaction.4_2
		character_event = {
			id = PlusFaction.6 #Faction leader focuses on faction
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
		}
	}

	option = {
		name = PlusFaction.4_3
		character_event = {
			id = PlusFaction.7 #Faction leader focuses on liege
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
		}
	}

	# option = {
	# 	name = PlusFaction.4_4 #Faction leader focuses on realm
	# 	character_event = {
	# 		id = PlusFaction.8
	# 	}
	# 	ai_chance = {
	# 		factor = 0
	# 	}
	# }
}

#No guests arrive
character_event = {
	id = PlusFaction.9
	title = PlusFaction.9_title
	desc = PlusFaction.9_desc
	picture = GFX_evt_bad_news
	sound = time_forward

	is_triggered_only = yes

	option = {
		name = PlusFaction.9_1
		plus_clean_faction_events = yes #Cleans all flags and variables set in the faction events file
	}
}

#Faction leader deemed not fit to lead faction
character_event = {
	id = PlusFaction.12
	title = PlusFaction.12_title
	desc = PlusFaction.12_desc
	picture = GFX_evt_council_quarrelling

	is_triggered_only = yes

	immediate = {
		plus_clean_faction_events = yes #Cleans all flags and variables set in the faction events file
	}

	option = {
		name = PlusFaction.12_1
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					character_event = {
						id = PlusFaction.13 #Faction members decide on leadership status
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					character_event = {
						id = PlusFaction.13 #Faction members decide on leadership status
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					character_event = {
						id = PlusFaction.13 #Faction members decide on leadership status
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					character_event = {
						id = PlusFaction.13 #Faction members decide on leadership status
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					character_event = {
						id = PlusFaction.13 #Faction members decide on leadership status
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.14 #Faction leader receives leadership results
			days = 1
		}
	}
}

#Faction members decide on leadership status
character_event = {
	id = PlusFaction.13
	title = PlusFaction.13_title
	desc = PlusFaction.13_desc
	picture = GFX_evt_council_quarrelling

	is_triggered_only = yes

	immediate = {
		FROM = {
			change_variable = { 
				which = "members" 
				value = 1
			}
		}
	}

	option = {
		name = PlusFaction.13_1
		hidden_tooltip = {
			FROM = {
				change_variable = { 
					which = "votes"
					value = 1
				}
			}
		}
		FROM = {
			opinion = {
				modifier = opinion_disappointed
				who = ROOT
				years = 10
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
	option = {
		name = PlusFaction.13_2
		FROM = {
			opinion = {
				modifier = opinion_relieved
				who = ROOT
				years = 10
			}	
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction leader receives leadership results
character_event = {
	id = PlusFaction.14
	title = PlusFaction.14_title
	desc = PlusFaction.14_desc
	picture = {
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		picture = GFX_evt_council_agreement
	}
	picture = {
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		picture = GFX_evt_council_quarrelling
	}

	is_triggered_only = yes

	immediate = {
		subtract_variable = {
			which = "members"
			which = "votes"
		}
		change_variable = {
			which = "results"
			which = "members"
		}
	}
	
	option = {
		name = PlusFaction.14_1
		sound_effect = pleased_council
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		set_character_flag = vote_winner
	}

	option = {
		name = PlusFaction.14_2
		sound_effect = displeased_council
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		set_character_flag = vote_loser
		scaled_prestige = -0.25
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				leave_faction = faction_court 
				add_character_modifier = {
					modifier = plus_faction_abbandoned
					years = 10
				}
			}
			faction_order = {
				leave_faction = faction_order
				add_character_modifier = {
					modifier = plus_faction_abbandoned
					years = 10
				}
			}
			faction_prosperity = {
				leave_faction = faction_prosperity
				add_character_modifier = {
					modifier = plus_faction_abbandoned
					years = 10
				}
			}
			faction_glory = {
				leave_faction = faction_glory
				add_character_modifier = {
					modifier = plus_faction_abbandoned
					years = 10
				}
			}
			faction_tradition = {
				leave_faction = faction_tradition
				add_character_modifier = {
					modifier = plus_faction_abbandoned
					years = 10
				}
			}
		}
	}

	after = {
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					character_event = {
						id = PlusFaction.15 #Faction members receives leadership results
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					character_event = {
						id = PlusFaction.15 #Faction members receives leadership results
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					character_event = {
						id = PlusFaction.15 #Faction members receives leadership results
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					character_event = {
						id = PlusFaction.15 #Faction members receives leadership results
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					character_event = {
						id = PlusFaction.15 #Faction members receives leadership results
					}
				}
			}
		}
	}
}

#Faction members receives leadership results
character_event = {
	id = PlusFaction.15
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_winner
			}
		}
		text = PlusFaction.15_desc_1
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_loser
			}
		}
		text = PlusFaction.15_desc_2
	}
	picture = GFX_evt_council_quarrelling

	is_triggered_only = yes

	option = {
		name = PlusFaction.15_1
	}

	after = {
		FROM = {
			plus_clean_faction_events = yes #Cleans all flags and variables set in the faction events file
		}
	}
}

#Faction meeting is concluded
character_event = {
	id = PlusFaction.19
	desc = PlusFaction.19_desc
	picture = GFX_evt_feast_hf
	sound = bloodline_added

	is_triggered_only = yes

	option = {
		name = PlusFaction.19_1
		plus_clean_faction_events = yes #Cleans all flags and variables set in the faction events file
	}
}






#Focuses on self
#####

#Faction leader focuses on self
character_event = {
	id = PlusFaction.5
	title = PlusFaction.5_title
	desc = PlusFaction.5_desc
	picture = GFX_evt_gathering_of_minds
	sound = turning_page

	is_triggered_only = yes
	
	option = {
		name = PlusFaction.5_1
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.10 #Faction members receive request for membership dues
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.10 #Faction members receive request for membership dues
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.10 #Faction members receive request for membership dues
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.10 #Faction members receive request for membership dues
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.10 #Faction members receive request for membership dues
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.11 #Faction leader receives the results of the membership dues
			days = 1
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			stewardship_factor = yes #Use this one for stewardship focused events
		}
	}
	option = {
		name = PlusFaction.5_2
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.17 #Faction members receive request for advice
						}
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.17 #Faction members receive request for advice
						}
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.17 #Faction members receive request for advice
						}
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.17 #Faction members receive request for advice
						}
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.17 #Faction members receive request for advice
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
		}
	}

	option = {
		name = PlusFaction.5_3
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.20 #Faction members receive request for artifact
						}
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.20 #Faction members receive request for artifact
						}
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.20 #Faction members receive request for artifact
						}
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.20 #Faction members receive request for artifact
						}
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					if = {
						limit = {
							has_character_flag = accepted_meeting
						}
						character_event = {
							id = PlusFaction.20 #Faction members receive request for artifact
						}
					}
				}
			}
		}
		random = {
			chance = 25
			character_event = {
				id = PlusFaction.12 #Faction leader deemed not fit to lead faction
				days = 1
			}
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
		}
	}
	option = {
		name = PlusFaction.5_4
		character_event = {
			id = PlusFaction.4 #Faction leader presents agenda
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Membership dues
#Faction members receive request for membership dues
character_event = {
	id = PlusFaction.10
	title = PlusFaction.10_title
	desc = PlusFaction.10_desc
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	immediate = {
		FROM = {
			change_variable = { 
				which = "members"
				value = 1
			}
		}
	}
	
	option = {
		name = PlusFaction.10_1
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "votes"
					value = 1
				}
			}
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.10_2
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				leave_faction = faction_court
			}
			faction_order = {
				leave_faction = faction_order
			}
			faction_prosperity = {
				leave_faction = faction_prosperity
			}
			faction_glory = {
				leave_faction = faction_glory
			}
			faction_tradition = {
				leave_faction = faction_tradition
			}
		}
		add_character_modifier = {
			modifier = plus_faction_abbandoned
			years = 10
		}
		ai_chance = {
			factor = 1
			stewardship_factor = yes #Use this one for stewardship focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction leader receives the results of the membership dues
character_event = {
	id = PlusFaction.11
	title = PlusFaction.11_title
	desc = PlusFaction.11_desc
	picture = {
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		picture = GFX_evt_council_agreement
	}
	picture = {
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		picture = GFX_evt_council_quarrelling
	}

	is_triggered_only = yes

	immediate = {
		subtract_variable = {
			which = "members"
			which = "votes"
		}
		change_variable = {
			which = "results"
			which = "members"
		}
	}
	
	option = {
		name = PlusFaction.11_1
		sound_effect = pleased_council
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				any_faction_backer = {
					faction = faction_court
					transfer_scaled_wealth = {
						to = FROM 
						value = 0.1
					}
					opinion = { 
						modifier = opinion_disappointed
						who = ROOT
						years = 10
					}
				}
			}
			faction_order = {
				any_faction_backer = {
					faction = faction_order
					transfer_scaled_wealth = {
						to = FROM 
						value = 0.1
					}
					opinion = { 
						modifier = opinion_disappointed
						who = ROOT
						years = 10
					}
				}
			}
			faction_prosperity = {
				any_faction_backer = {
					faction = faction_prosperity
					transfer_scaled_wealth = {
						to = FROM 
						value = 0.1
					}
					opinion = { 
						modifier = opinion_disappointed
						who = ROOT
						years = 10
					}
				}
			}
			faction_glory = {
				any_faction_backer = {
					faction = faction_glory
					transfer_scaled_wealth = {
						to = FROM 
						value = 0.1
					}
					opinion = { 
						modifier = opinion_disappointed
						who = ROOT
						years = 10
					}
				}
			}
			faction_tradition = {
				any_faction_backer = {
					faction = faction_tradition
					transfer_scaled_wealth = {
						to = FROM 
						value = 0.1
					}
					opinion = { 
						modifier = opinion_disappointed
						who = ROOT
						years = 10
					}
				}
			}
		}
		random = {
			chance = 25
			character_event = {
				id = PlusFaction.12 #Faction leader deemed not fit to lead faction
			}
		}
	}

	option = {
		name = PlusFaction.11_2
		sound_effect = displeased_council
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		scaled_prestige = -0.25
		character_event = {
			id = PlusFaction.12 #Faction leader deemed not fit to lead faction
		}
	}

	after = {
		any_faction_backer = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						character_event = {
							id = PlusFaction.16 #Faction members receive the results of the membership dues
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						character_event = {
							id = PlusFaction.16 #Faction members receive the results of the membership dues
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						character_event = {
							id = PlusFaction.16 #Faction members receive the results of the membership dues
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						character_event = {
							id = PlusFaction.16 #Faction members receive the results of the membership dues
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						character_event = {
							id = PlusFaction.16 #Faction members receive the results of the membership dues
						}
					}
				}
			}
		}
	}
}

#Faction members receive the results of the membership dues
character_event = {
	id = PlusFaction.16
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_winner
			}
		}
		text = PlusFaction.16_desc_1
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_loser
			}
		}
		text = PlusFaction.16_desc_2
	}
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = PlusFaction.16_1
		character_event = {
			id = PlusFaction.19 #Faction meeting is cloncluded
			days = 3
		}
	}
}

#Faction members receive request for advice
character_event = {
	id = PlusFaction.17
	desc = PlusFaction.17_desc
	picture = GFX_evt_elder_council

	is_triggered_only = yes

	option = {
		name = {
			text = PlusFaction.17_1_1
			trigger = {
				attribute_diff = {
					character = FROM
					attribute = diplomacy
					value = 5
				}
			}
		}
		name = {
			text = PlusFaction.17_1_2
			trigger = {
				attribute_diff = {
					character = FROM
					attribute = intrigue
					value = 5
				}
			}
		}
		name = {
			text = PlusFaction.17_1_3
			trigger = {
				attribute_diff = {
					character = FROM
					attribute = stewardship
					value = 5
				}
			}
		}
		name = {
			text = PlusFaction.17_1_4
			trigger = {
				attribute_diff = {
					character = FROM
					attribute = martial
					value = 5
				}
			}
		}
		name = {
			text = PlusFaction.17_1_5
			trigger = {
				attribute_diff = {
					character = FROM
					attribute = learning
					value = 5
				}
			}
		}
		trigger = {
			OR = {
				attribute_diff = {
					character = FROM
					attribute = diplomacy
					value = 5
				}
				attribute_diff = {
					character = FROM
					attribute = intrigue
					value = 5
				}
				attribute_diff = {
					character = FROM
					attribute = stewardship
					value = 5
				}
				attribute_diff = {
					character = FROM
					attribute = martial
					value = 5
				}
				attribute_diff = {
					character = FROM
					attribute = learning
					value = 5
				}
			}
		}
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "results"
					value = 1
				}
			}
		}
		scaled_prestige = 0.1
		if = {
			limit = {
				attribute_diff = {
					character = FROM
					attribute = diplomacy
					value = 5
				}
			}
			set_character_flag = diplomacy_advice
			FROM = {
				character_event = {
					id = PlusFaction.18 #Faction leader receives advice
				}
			}
		}
		else_if = {
			limit = {
				attribute_diff = {
					character = FROM
					attribute = intrigue
					value = 5
				}
			}
			set_character_flag = intrigue_advice
			FROM = {
				character_event = {
					id = PlusFaction.18 #Faction leader receives advice
				}
			}
		}
		else_if = {
			limit = {
				attribute_diff = {
					character = FROM
					attribute = stewardship
					value = 5
				}
			}
			set_character_flag = stewardship_advice
			FROM = {
				character_event = {
					id = PlusFaction.18 #Faction leader receives advice
				}
			}
		}
		else_if = {
			limit = {
				attribute_diff = {
					character = FROM
					attribute = martial
					value = 5
				}
			}
			set_character_flag = martial_advice
			FROM = {
				character_event = {
					id = PlusFaction.18 #Faction leader receives advice
				}
			}
		}
		else = {
			set_character_flag = learning_advice
			FROM = {
				character_event = {
					id = PlusFaction.18 #Faction leader receives advice
				}
			}
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.17_2
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "results"
					value = 2
				}
			}
		}
		scaled_prestige = -0.25
		set_character_flag = no_advice
		FROM = {
			character_event = {
				id = PlusFaction.18 #Faction leader receives advice
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	after = {
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
	}
}

#Receive advice
#Faction leader receives advice
character_event = {
	id = PlusFaction.18
	desc = {
		trigger = {
			FROM = {
				has_character_flag = diplomacy_advice
			}
		}
		text = PlusFaction.18_desc_1
		picture = GFX_evt_diplomat_hf
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = intrigue_advice
			}
		}
		text = PlusFaction.18_desc_2
		picture = GFX_evt_brothel
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = stewardship_advice
			}
		}
		text = PlusFaction.18_desc_3
		picture = GFX_evt_relaxed_ruler
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = martial_advice
			}
		}
		text = PlusFaction.18_desc_4
		picture = GFX_evt_teaching_moment
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = learning_advice
			}
		}
		text = PlusFaction.18_desc_5
		picture = GFX_evt_open_book_hf
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = no_advice
			}
		}
		text = PlusFaction.18_desc_6
		picture = GFX_evt_suspicious_noble
	}
	picture = GFX_evt_council

	is_triggered_only = yes

	option = {
		name = PlusFaction.18_1
		trigger = {
			FROM = {
				NOT = {
					has_character_flag = no_advice
				}
			}
		}
		if = {
			limit = {
				FROM = {
					has_character_flag = diplomacy_advice
				}
			}
			random = {
				chance = 25
				change_diplomacy = 1
			}
		}
		else_if = {
			limit = {
				FROM = {
					has_character_flag = intrigue_advice
				}
			}
			random = {
				chance = 25
				change_intrigue = 1
			}
		}
		else_if = {
			limit = {
				FROM = {
					has_character_flag = stewardship_advice
				}
			}
			random = {
				chance = 25
				change_stewardship = 1
			}
		}
		else_if = {
			limit = {
				FROM = {
					has_character_flag = martial_advice
				}
			}
			random = {
				chance = 25
				change_martial = 1
			}
		}
		else = {
			random = {
				chance = 25
				change_learning = 1
			}
		}
		scaled_prestige = -0.1
	}

	option = {
		name = PlusFaction.18_2
		trigger = {
			FROM = {
				has_character_flag = no_advice
			}
		}
		scaled_prestige = -0.25
	}

	after = {
		if = {
			limit = {
				check_variable = {
					which = "results"
					value = 5
				}
			}
			random = {
				chance = 5
				character_event = {
					id = PlusFaction.12 #Faction leader deemed not fit to lead faction
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = "results"
					value = 10
				}
			}
			random = {
				chance = 10
				character_event = {
					id = PlusFaction.12 #Faction leader deemed not fit to lead faction
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = "results"
					value = 15
				}
			}
			random = {
				chance = 15
				character_event = {
					id = PlusFaction.12 #Faction leader deemed not fit to lead faction
				}
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = "results"
					value = 20
				}
			}
			random = {
				chance = 20
				character_event = {
					id = PlusFaction.12 #Faction leader deemed not fit to lead faction
				}
			}
		}
	}
}

#Request for artifact
#Faction members receive request for artifact
character_event = {
	id = PlusFaction.20
	desc = PlusFaction.20_desc
	picture = GFX_evt_pagan_artifacts

	is_triggered_only = yes

	option = {
		name = PlusFaction.20_1
		trigger = {
			num_of_artifacts = 2
		}
		set_character_flag = for_money
		FROM = {
			character_event = {
				id = PlusFaction.21 #Faction leader receives artifact
			}
		}
		ai_chance = {
			factor = 1
			stewardship_factor = yes #Use this one for stewardship focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.20_2
		trigger = {
			num_of_artifacts = 2
		}
		set_character_flag = for_piety
		FROM = {
			character_event = {
				id = PlusFaction.21 #Faction leader receives artifact
			}
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.20_3
		trigger = {
			num_of_artifacts = 2
		}
		set_character_flag = for_prestige
		FROM = {
			character_event = {
				id = PlusFaction.21 #Faction leader receives artifact
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.20_4
		FROM = {
			character_event = {
				id = PlusFaction.21 #Faction leader receives artifact
			}
		}
		set_character_flag = no_artifact
		ai_chance = {
			factor = 1
			stewardship_factor = yes #Use this one for stewardship focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	after = {
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
	}
}

#Faction leader receives artifact
character_event = {
	id = PlusFaction.21
	desc = PlusFaction.21_desc
	picture = GFX_evt_pagan_artifacts

	is_triggered_only = yes

	option = {
		name = PlusFaction.21_1
		trigger = {
			FROM = {
				has_character_flag = for_money
			}
		}
		FROM = {
			random_artifact = {
				transfer_artifact = {
					from = PREV
					to = PREVPREV
				}
			}
		}
		transfer_scaled_wealth = {
			to = FROM
			value = 10
		}
	}

	option = {
		name = PlusFaction.21_2
		trigger = {
			FROM = {
				has_character_flag = for_piety
			}
		}
		FROM = {
			random_artifact = {
				transfer_artifact = {
					from = PREV
					to = PREVPREV
				}
			}
			scaled_piety = 10
		}
		scaled_piety = -10
	}

	option = {
		name = PlusFaction.21_3
		trigger = {
			FROM = {
				has_character_flag = for_prestige
			}
		}
		FROM = {
			random_artifact = {
				transfer_artifact = {
					from = PREV
					to = PREVPREV
				}
			}
			scaled_prestige = 10
		}
		scaled_prestige = -10
	}

	option = {
		name = PlusFaction.21_4
		trigger = {
			FROM = {
				has_character_flag = no_artifact
			}
		}
		scaled_piety = 0.05
	}
}






#Focuses on faction
#####

#Faction leader focuses on faction
character_event = {
	id = PlusFaction.6
	desc = PlusFaction.6_desc
	picture = GFX_evt_council_speaker
	sound = turning_page

	is_triggered_only = yes

	option = {
		name = PlusFaction.6_1
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.22 #Faction leader gives speech
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.22 #Faction leader gives speech
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.22 #Faction leader gives speech
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.22 #Faction leader gives speech
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.22 #Faction leader gives speech
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.22 #Faction leader gives speech
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
		}
	}

	option = {
		name = PlusFaction.6_2
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.25 #Faction leader wants inventions
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.25 #Faction leader wants inventions
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.25 #Faction leader wants inventions
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.25 #Faction leader wants inventions
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.25 #Faction leader wants inventions
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.25 #Faction leader wants inventions
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			learning_factor = yes #Use this one for learning focused events
		}
	}

	option = {
		name = PlusFaction.6_3
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.26 #Faction leader wants a raid
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.26 #Faction leader wants a raid
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.26 #Faction leader wants a raid
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.26 #Faction leader wants a raid
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.26 #Faction leader wants a raid
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.27 #Faction leader receives the results of the raid
			days = 1
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			martial_factor = yes #Use this one for martial focused events
		}
	}

	option = {
		name = PlusFaction.6_4
		character_event = {
			id = PlusFaction.4 #Faction leader presents agenda
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Brotherhood
#Faction leader gives speech
character_event = {
	id = PlusFaction.22
	desc = {
		text = PlusFaction.22_desc_1
		picture = GFX_evt_council_speaker
		trigger = {
			character = FROM
		}
	}
	desc = {
		text = PlusFaction.22_desc_2
		picture = GFX_evt_council_speaker
		trigger = {
			NOT = {
				character = FROM
			}
		}
	}
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = {
			text = PlusFaction.22_1_1
			trigger = {
				character = FROM
			}
		}
		name = {
			text = PlusFaction.22_1_2
			trigger = {
				NOT = {
					character = FROM
				}
			}
		}
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						character_event = {
							id = PlusFaction.23 #Faction members choose on non-aggression pact
							days = 1
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						character_event = {
							id = PlusFaction.23 #Faction members choose on non-aggression pact
							days = 1
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						character_event = {
							id = PlusFaction.23 #Faction members choose on non-aggression pact
							days = 1
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						character_event = {
							id = PlusFaction.23 #Faction members choose on non-aggression pact
							days = 1
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						character_event = {
							id = PlusFaction.23 #Faction members choose on non-aggression pact
							days = 1
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.22_2
		trigger = {
			NOT = {
				character = FROM
			}
		}
		FROM = {
			opinion = { 
				modifier = opinion_disappointed
				who = ROOT
				years = 10
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	after = {
		if = {
			limit = {
				NOT = {
					character = FROM
				}
			}
			character_event = {
				id = PlusFaction.19 #Faction meeting is concluded
				days = 3
			}
		}
	}
}

#Faction members choose on non-aggression pact
character_event = {
	id = PlusFaction.23
	desc = PlusFaction.23_desc
	picture = GFX_evt_meeting_hf

	is_triggered_only = yes

	option = {
		name = PlusFaction.23_1
		set_character_flag = accepted_nap
		FROM = {
			character_event = {
				id = PlusFaction.24 #Faction members send non-aggression pact results
			}
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.23_2
		scaled_prestige = 0.1
		FROM = {
			character_event = {
				id = PlusFaction.24 #Faction members send non-aggression pact results
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction members receive non-aggression pact results
character_event = {
	id = PlusFaction.24
	desc = {
		text = PlusFaction.24_desc_1
		picture = GFX_evt_shadowy_cabal
		trigger = {
			FROM = {
				has_character_flag = accepted_nap
			}
		}
	}
	desc = {
		text = PlusFaction.24_desc_2
		picture = GFX_evt_poke_king_in_chest
		trigger = {
			FROM = {
				NOT = {
					has_character_flag = accepted_nap
				}
			}
		}
	}
	picture = GFX_evt_meeting_hf

	is_triggered_only = yes

	option = {
		name = PlusFaction.24_1
		trigger = {
			FROM = {
				has_character_flag = accepted_nap
			}
		}
		opinion = {
			modifier = in_non_aggression_pact
			who = FROM
			years = 10
		}
	}

	option = {
		name = PlusFaction.24_2
		trigger = {
			NOT = {
				FROM = {
					has_character_flag = accepted_nap
				}
			}
		}
		scaled_prestige = -0.1
		opinion = {
			modifier = broken_non_aggression_pact
			who = FROM
			years = 10
		}
	}
}

#Inventions
#Faction leader wants inventions
character_event = {
	id = PlusFaction.25
	desc = {
		text = PlusFaction.25_desc_1
		picture = GFX_evt_state_diplomacy
		trigger = {
			character = FROM
		}
	}
	desc = {
		text = PlusFaction.25_desc_2
		picture = GFX_evt_state_diplomacy
		trigger = {
			NOT = {
				character = FROM
			}
		}
	}
	picture = GFX_evt_state_diplomacy

	is_triggered_only = yes

	option = {
		name = PlusFaction.25_1
		trigger = {
			character = FROM
		}
		random_list = {
			25 = { 
				culture_techpoints = 25
			}
			25 = { 
				economy_techpoints = 25
			}
			25 = { 
				military_techpoints = 25
			}
			25 = { 
				add_trait = stressed
			}
		}
	}

	option = {
		name = PlusFaction.25_2
		trigger = {
			NOT = {
				character = FROM
			}
		}
		random_list = {
			25 = { 
				culture_techpoints = 25
			}
			25 = { 
				economy_techpoints = 25
			}
			25 = { 
				military_techpoints = 25
			}
			25 = { 
				add_trait = stressed
			}
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
	}
}

#Faction leader wants a raid
character_event = {
	id = PlusFaction.26
	title = PlusFaction.26_title
	desc = PlusFaction.26_desc
	picture = GFX_evt_war_planning

	is_triggered_only = yes

	immediate = {
		FROM = {
			change_variable = { 
				which = "members"
				value = 1
			}
		}
		liege = {
			random_vassal = {
				limit = {
					NOT = {
						character = ROOT
					}
					OR = {
						leads_faction = faction_court
						leads_faction = faction_order
						leads_faction = faction_prosperity
						leads_faction = faction_glory
						leads_faction = faction_tradition
					}
				}
				save_global_event_target_as = raid_target
			}
		}
	}
	
	option = {
		name = PlusFaction.26_1
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "votes"
					value = 1
				}
			}
		}
		ai_chance = {
			factor = 1
			martial_factor = yes #Use this one for martial focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.26_2
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				leave_faction = faction_court
			}
			faction_order = {
				leave_faction = faction_order
			}
			faction_prosperity = {
				leave_faction = faction_prosperity
			}
			faction_glory = {
				leave_faction = faction_glory
			}
			faction_tradition = {
				leave_faction = faction_tradition
			}
		}
		add_character_modifier = {
			modifier = plus_faction_abbandoned
			years = 10
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction leader receives the results of the raid vote
character_event = {
	id = PlusFaction.27
	title = PlusFaction.27_title
	desc = PlusFaction.27_desc
	picture = {
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		picture = GFX_evt_battle_altaic
	}
	picture = {
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		picture = GFX_evt_council_quarrelling
	}

	is_triggered_only = yes

	immediate = {
		subtract_variable = {
			which = "members"
			which = "votes"
		}
		change_variable = {
			which = "results"
			which = "members"
		}
	}
	
	option = {
		name = PlusFaction.27_1
		sound_effect = inspire_warriors_01
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		character_event = {
			id = PlusFaction.29 #Raid results
			days = 1
		}
	}

	option = {
		name = PlusFaction.27_2
		sound_effect = displeased_council
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		scaled_prestige = -0.25
		character_event = {
			id = PlusFaction.12 #Faction leader deemed not fit to lead faction
		}
	}

	after = {
		any_faction_backer = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						character_event = {
							id = PlusFaction.28 #Faction members receive the results of the raid vote
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						character_event = {
							id = PlusFaction.28 #Faction members receive the results of the raid vote
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						character_event = {
							id = PlusFaction.28 #Faction members receive the results of the raid vote
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						character_event = {
							id = PlusFaction.28 #Faction members receive the results of the raid vote
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						character_event = {
							id = PlusFaction.28 #Faction members receive the results of the raid vote
						}
					}
				}
			}
		}
	}
}

#Faction members receive the results of the raid vote
character_event = {
	id = PlusFaction.28
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_winner
			}
		}
		text = PlusFaction.16_desc_1
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_loser
			}
		}
		text = PlusFaction.16_desc_2
	}
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = PlusFaction.16_1
		if = {
			limit = {
				FROM = {
					has_character_flag = vote_winner
				}
			}
			sound_effect = inspire_warriors_02
		}
		character_event = {
			id = PlusFaction.29 #Raid results
			days = 1
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
	}
}

#Raid results
character_event = {
	id = PlusFaction.29
	desc = PlusFaction.29_desc
	picture = GFX_evt_vikings_arriving_oldgods

	is_triggered_only = yes

	option = {
		name = PlusFaction.29_1
		sound_effect = call_of_the_steppe_02
		event_target:raid_target = {
			random = {
				chance = 20
				character_event = {
					id = PlusFaction.30 #Faction members are raided
				}
				transfer_scaled_wealth = {
					to = ROOT
					value = 0.25
				}
				opinion = { 
					modifier = opinion_looted
					who = ROOT
					years = 10
				}
			}
			any_faction_backer = {
				trigger_switch = {
					on_trigger = in_faction
					faction_court = {
						any_faction_backer = {
							faction = faction_court
							random = {
								chance = 20
								character_event = {
									id = PlusFaction.30 #Faction members are raided
								}
								transfer_scaled_wealth = {
									to = ROOT
									value = 0.25
								}
								opinion = { 
									modifier = opinion_looted
									who = ROOT
									years = 10
								}
							}
						}
					}
					faction_order = {
						any_faction_backer = {
							faction = faction_order
							random = {
								chance = 20
								character_event = {
									id = PlusFaction.30 #Faction members are raided
								}
								transfer_scaled_wealth = {
									to = ROOT
									value = 0.25
								}
								opinion = { 
									modifier = opinion_looted
									who = ROOT
									years = 10
								}
							}
						}
					}
					faction_prosperity = {
						any_faction_backer = {
							faction = faction_prosperity
							random = {
								chance = 20
								character_event = {
									id = PlusFaction.30 #Faction members are raided
								}
								transfer_scaled_wealth = {
									to = ROOT
									value = 0.25
								}
								opinion = { 
									modifier = opinion_looted
									who = ROOT
									years = 10
								}
							}
						}
					}
					faction_glory = {
						any_faction_backer = {
							faction = faction_glory
							random = {
								chance = 20
								character_event = {
									id = PlusFaction.30 #Faction members are raided
								}
								transfer_scaled_wealth = {
									to = ROOT
									value = 0.25
								}
								opinion = { 
									modifier = opinion_looted
									who = ROOT
									years = 10
								}
							}
						}
					}
					faction_tradition = {
						any_faction_backer = {
							faction = faction_tradition
							random = {
								chance = 20
								character_event = {
									id = PlusFaction.30 #Faction members are raided
								}
								transfer_scaled_wealth = {
									to = ROOT
									value = 0.25
								}
								opinion = { 
									modifier = opinion_looted
									who = ROOT
									years = 10
								}
							}
						}
					}
				}
			}
		}
	}
}

#Faction members are raided
character_event = {
	id = PlusFaction.30
	desc = PlusFaction.30_desc
	picture = GFX_evt_vikings_arriving_oldgods
	sound = call_of_the_steppe_03

	is_triggered_only = yes

	option = {
		name = PlusFaction.30_1
	}
}




#Focuses on liege
#####

#Faction leader focuses on liege
character_event = {
	id = PlusFaction.7
	title = PlusFaction.7_title
	desc = PlusFaction.7_desc
	picture = GFX_evt_gathering_of_minds
	sound = turning_page

	is_triggered_only = yes
	
	option = {
		name = PlusFaction.7_1
		random_list = {
			25 = { 
				scaled_wealth = -0.1
				set_character_flag = for_money
			}
			25 = {
				scaled_prestige = -0.1
				set_character_flag = for_prestige
			}
			25 = {
				scaled_piety = -0.1
				set_character_flag = for_piety
			}
			25 = {
				custom_tooltip = {
					text = plus_favor
				}
			}
		}
		liege = {
			opinion = {
				modifier = opinion_very_grateful_donation
				who = ROOT
				years = 10
			}
			letter_event = {
				id = PlusFaction.32 #Faction liege receives support
			}
		}
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.31 #Faction leader gives speech regarding liege support
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.31 #Faction leader gives speech regarding liege support
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.31 #Faction leader gives speech regarding liege support
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.31 #Faction leader gives speech regarding liege support
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.31 #Faction leader gives speech regarding liege support
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
		}
	}

	option = {
		name = PlusFaction.7_2
		liege = {
			add_character_modifier = {
				modifier = plus_increased_spy_reports
				years = 10
			}
			letter_event = {
				id = PlusFaction.34 #Faction liege receives spies
			}
		}
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.33 #Faction leader asks to spy for liege
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.33 #Faction leader asks to spy for liege
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.33 #Faction leader asks to spy for liege
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.33 #Faction leader asks to spy for liege
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.33 #Faction leader asks to spy for liege
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
		}
	}

	option = {
		name = PlusFaction.7_3
		hidden_tooltip = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.35 #Faction leader requests assassination
							}
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.35 #Faction leader requests assassination
							}
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.35 #Faction leader requests assassination
							}
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.35 #Faction leader requests assassination
							}
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						if = {
							limit = {
								has_character_flag = accepted_meeting
							}
							character_event = {
								id = PlusFaction.35 #Faction leader requests assassination
							}
						}
					}
				}
			}
		}
		character_event = {
			id = PlusFaction.36 #Faction leader receives the results of the assassination vote
			days = 1
		}
		character_event = {
			id = PlusFaction.38 #Faction leader receives the results of the assassination
			days = 2
		}
		character_event = {
			id = PlusFaction.19 #Faction meeting is concluded
			days = 3
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
		}
	}

	option = {
		name = PlusFaction.7_4
		character_event = {
			id = PlusFaction.4 #Faction leader presents agenda
		}
		ai_chance = {
			factor = 0
		}
	}
}

#Faction leader gives speech regarding liege support
character_event = {
	id = PlusFaction.31
	title = PlusFaction.31_title
	desc = PlusFaction.31_desc
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = PlusFaction.31_1
		random_list = {
			25 = { 
				scaled_wealth = -0.1
				set_character_flag = for_money
			}
			25 = {
				scaled_prestige = -0.1
				set_character_flag = for_prestige
			}
			25 = {
				scaled_piety = -0.1
				set_character_flag = for_piety
			}
			25 = {
				custom_tooltip = {
					text = plus_favor
				}
			}
		}
		FROM = {
			liege = {
				opinion = {
					modifier = opinion_very_grateful_donation
					who = ROOT
					years = 10
				}
				letter_event = {
					id = PlusFaction.32 #Faction liege receives support
				}
			}
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.31_2
		FROM = {
			liege = {
				opinion = {
					modifier = opinion_disrespects_me
					who = ROOT
					years = 10
				}
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction liege receives support
letter_event = {
	id = PlusFaction.32
	title = PlusFaction.32_title
	desc = PlusFaction.32_desc

	is_triggered_only = yes

	option = {
		name = PlusFaction.32_1
		if = {
			limit = {
				FROM = {
					has_character_flag = for_money
				}
			}
			scaled_wealth = 0.1
		}
		if = {
			limit = {
				FROM = {
					has_character_flag = for_prestige
				}
			}
			scaled_prestige = 0.1
		}
		if = {
			limit = {
				FROM = {
					has_character_flag = for_piety
				}
			}
			scaled_piety = 0.1
		}
		else = {
			add_favor = FROM
		}
	}
}

#Spying
#Faction leader asks to spy for liege
character_event = {
	id = PlusFaction.33
	title = PlusFaction.33_title
	desc = PlusFaction.33_desc
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = PlusFaction.33_1
		hidden_tooltip = {
			FROM = {
				liege = {
					add_character_modifier = {
						modifier = plus_increased_spy_reports
						years = 10
					}
				}
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.33_2
		hidden_tooltip = {
			FROM = {
				liege = {
					add_character_modifier = {
						modifier = undermined_spy_network_2
						years = 10
					}
				}
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction liege receives support
letter_event = {
	id = PlusFaction.34
	title = PlusFaction.34_title
	desc = PlusFaction.34_desc

	is_triggered_only = yes

	option = {
		name = PlusFaction.32_1
	}
}

#Assasination
#Faction leader requests assassination
character_event = {
	id = PlusFaction.35
	title = PlusFaction.35_title
	desc = PlusFaction.35_desc
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	immediate = {
		FROM = {
			change_variable = { 
				which = "members"
				value = 1
			}
		}
	}
	
	option = {
		name = PlusFaction.35_1
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "votes"
					value = 1
				}
			}
		}
		ai_chance = {
			factor = 1
			intrigue_factor = yes #Use this one for intrigue focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}

	option = {
		name = PlusFaction.35_2
		hidden_tooltip = {
			FROM = {
				change_variable = {
					which = "plot"
					value = -3
				}
			}
		}
		random_list = {
			30 = {
				add_trait = wounded
			}
			20 = {
				add_trait = maimed
			}
			10 = {
				add_trait = infirm
			}
		}
		trigger_switch = {
			on_trigger = in_faction
			faction_court = {
				leave_faction = faction_court
			}
			faction_order = {
				leave_faction = faction_order
			}
			faction_prosperity = {
				leave_faction = faction_prosperity
			}
			faction_glory = {
				leave_faction = faction_glory
			}
			faction_tradition = {
				leave_faction = faction_tradition
			}
		}
		add_character_modifier = {
			modifier = plus_faction_abbandoned
			years = 10
		}
		ai_chance = {
			factor = 1
			diplomacy_factor = yes #Use this one for diplomacy focused events
			like_factor = yes #Use this one for events involving a FROM character
		}
	}
}

#Faction leader receives the results of the assassination vote
character_event = {
	id = PlusFaction.36
	title = PlusFaction.36_title
	desc = PlusFaction.36_desc
	picture = {
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
		picture = GFX_evt_council_agreement
	}
	picture = {
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		picture = GFX_evt_council_quarrelling
	}

	is_triggered_only = yes

	immediate = {
		subtract_variable = {
			which = "members"
			which = "votes"
		}
		change_variable = {
			which = "results"
			which = "members"
		}
	}
	
	option = {
		name = PlusFaction.36_1
		sound_effect = pleased_council
		trigger = {
			check_variable = {
				which = "votes"
				which = "results"
			}
		}
	}

	option = {
		name = PlusFaction.36_2
		sound_effect = displeased_council
		trigger = {
			NOT = {
				check_variable = {
					which = "votes"
					which = "results"
				}
			}
		}
		scaled_prestige = -0.25
		character_event = {
			id = PlusFaction.12 #Faction leader deemed not fit to lead faction
		}
	}

	after = {
		any_faction_backer = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						character_event = {
							id = PlusFaction.37 #Faction members receive the results of the assassination vote
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						character_event = {
							id = PlusFaction.37 #Faction members receive the results of the assassination vote
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						character_event = {
							id = PlusFaction.37 #Faction members receive the results of the assassination vote
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						character_event = {
							id = PlusFaction.37 #Faction members receive the results of the assassination vote
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						character_event = {
							id = PlusFaction.37 #Faction members receive the results of the assassination vote
						}
					}
				}
			}
		}
	}
}

#Faction members receive the results of the assassination vote
character_event = {
	id = PlusFaction.37
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_winner
			}
		}
		text = PlusFaction.37_desc_1
	}
	desc = {
		trigger = {
			FROM = {
				has_character_flag = vote_loser
			}
		}
		text = PlusFaction.37_desc_2
	}
	picture = GFX_evt_council_speaker

	is_triggered_only = yes

	option = {
		name = PlusFaction.37_1
		character_event = {
			id = PlusFaction.19 #Faction meeting is cloncluded
			days = 3
		}
	}
}

#Faction leader receives the results of the assassination
character_event = {
	id = PlusFaction.38
	title = PlusFaction.38_title
	desc = {
		text = PlusFaction.38_desc_1
		picture = GFX_evt_dead_body_hf
		trigger = {
			has_character_flag = successful_assassination
		}
	}
	desc = {
		text = PlusFaction.38_desc_2
		picture = GFX_evt_hiding_from_pursuers
		trigger = {
			NOT = {
				has_character_flag = successful_assassination
			}
		}
	}
	picture = GFX_evt_hiding_from_pursuers	

	is_triggered_only = yes

	immediate = {
		subtract_variable = {
			which = "votes"
			which = "plot"
		}
		if = {
			limit = {
				check_variable = {
					which = "votes"
					value = 10
				}
			}
			random = {
				chance = 30
				liege = {
					death = {
						death_reason = death_vanished
					}
				}
				set_character_flag = successful_assassination
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = "votes"
					value = 5
				}
			}
			random = {
				chance = 20
				liege = {
					death = {
						death_reason = death_vanished
					}
				}
				set_character_flag = successful_assassination
			}
		}
		else_if = {
			limit = {
				check_variable = {
					which = "votes"
					value = 1
				}
			}
			random = {
				chance = 10
				liege = {
					death = {
						death_reason = death_vanished
					}
				}
				set_character_flag = successful_assassination
			}
		}
	}
	
	option = {
		name = PlusFaction.38_1
		sound_effect = assassins_assassinate_character
		trigger = {
			has_character_flag = successful_assassination
		}
	}

	option = {
		name = PlusFaction.38_2
		sound_effect = reaction_antagonize_01
		trigger = {
			NOT = {
				has_character_flag = successful_assassination
			}
		}
	}

	after = {
		any_faction_backer = {
			trigger_switch = {
				on_trigger = in_faction
				faction_court = {
					any_faction_backer = {
						faction = faction_court
						character_event = {
							id = PlusFaction.39 #Faction members receive the results of the assassination
						}
					}
				}
				faction_order = {
					any_faction_backer = {
						faction = faction_order
						character_event = {
							id = PlusFaction.39 #Faction members receive the results of the assassination
						}
					}
				}
				faction_prosperity = {
					any_faction_backer = {
						faction = faction_prosperity
						character_event = {
							id = PlusFaction.39 #Faction members receive the results of the assassination
						}
					}
				}
				faction_glory = {
					any_faction_backer = {
						faction = faction_glory
						character_event = {
							id = PlusFaction.39 #Faction members receive the results of the assassination
						}
					}
				}
				faction_tradition = {
					any_faction_backer = {
						faction = faction_tradition
						character_event = {
							id = PlusFaction.39 #Faction members receive the results of the assassination
						}
					}
				}
			}
		}
	}
}

#Faction leader receives the results of the assassination
character_event = {
	id = PlusFaction.39
	title = PlusFaction.39_title
	desc = {
		text = PlusFaction.39_desc_1
		picture = GFX_evt_dead_body_hf
		trigger = {
			FROM = {
				has_character_flag = successful_assassination
			}
		}
	}
	desc = {
		text = PlusFaction.39_desc_2
		picture = GFX_evt_hiding_from_pursuers
		trigger = {
			FROM = {
				NOT = {
					has_character_flag = successful_assassination
				}
			}
		}
	}
	picture = GFX_evt_hiding_from_pursuers	

	is_triggered_only = yes
	
	option = {
		name = PlusFaction.39_1
		sound_effect = assassins_assassinate_character
		trigger = {
			FROM = {
				has_character_flag = successful_assassination
			}
		}
	}

	option = {
		name = PlusFaction.39_2
		sound_effect = reaction_antagonize_01
		trigger = {
			FROM = {
				NOT = {
					has_character_flag = successful_assassination
				}
			}
		}
	}
}